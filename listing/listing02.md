### Что выведет программа? Объяснить вывод программы. Объяснить как работают defer’ы и порядок их вызовов.

```
package main

import (
	"fmt"
)

func test() (x int) {
	defer func() {
		x++
	}()
	x = 1
	return
}

func anotherTest() int {
	var x int
	defer func() {
		x++
	}()
	x = 1
	return x
}

func main() {
	fmt.Println(test())
	fmt.Println(anotherTest())
}

```

Ответ:
```
2
1
```
## Как?
Функция test() возвращает измененное defer'ом значение, т.к. последнее было определено в сигнатуре функции - в этом случае return фиксирует значение переменной после полного звершения функции и defer'ов внутри нее.

Функция anotherTest() возвращает последнее присвоенное значение переменной 'x' в момент выполнения 'return x', после чего выполняется defer, который по сути ничего не меняет. Для наглядности можно изменить предпоследнюю строку на x = 5, и получить на выходе именно 5:
```
var x int
defer func() {
    x = 0 + 1
}
x = 5
return 5
```
И то что происходит ниже defer'a в данном случае не имеет значения, в отличии от первого варианта, где переменной до defer'a еще не существовало.

## Порядок вызовов defer'ов
defer'ы хранятся в виде стека (LIFO), следовательно defer'ы вызываются в обратном порядке их определения.
Сами defer'ы вызываются в конце работы функции.